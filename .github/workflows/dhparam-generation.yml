name: dhparam-generation

on:
  workflow_dispatch:

jobs:
  dhparam-generation:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: generate dhparam
        id: update
        run: openssl dhparam -out rootfs/etc/ssl/dhparam 4096
#        run: openssl dhparam -out rootfs/etc/ssl/dhparam 8192

      - name: Create Pull Request
        uses: peter-evans/create-pull-request@v4
        with:
          signoff: true
          delete-branch: true
          commit-message: update dhparam
          branch: update-dhparam
          title: update dhparam
          body: update dhparam
